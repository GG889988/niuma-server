<!DOCTYPE html>
<html>
<head>
    <title>ç‰›é©¬å¾—é—²æµ‹è¯•ç‰ˆ</title>
    <meta charset="utf-8">
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; background: #f8f5f0; }
        .header { text-align: center; margin-bottom: 30px; }
        .logo { font-size: 48px; }
        .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .name { font-weight: bold; color: #8b4513; }
        .text { margin: 10px 0; }
        .likes { color: #666; font-size: 0.9em; }
        .loading { text-align: center; color: #888; padding: 40px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">ğŸ„ ğŸ</div>
        <h1>ç‰›é©¬å¾—é—² Â· å†…æµ‹ç‰ˆ</h1>
        <p>ä½ çš„åŒ¿åå–˜æ¯ç©ºé—´</p>
    </div>
    <div id="postList">
        <div class="loading">æ­£åœ¨åŠ è½½ç‰§åœºåŠ¨æ€...</div>
    </div>

    <script>
        // ğŸ”¥ æœ€é‡è¦çš„ä¸€æ­¥ï¼šæŠŠä¸‹é¢å¼•å·é‡Œçš„å†…å®¹ï¼Œæ¢æˆä½ ç¬¬äºŒæ­¥æœ€åå¾—åˆ°çš„é‚£ä¸ªRailwayç½‘å€ï¼
        const åå°åœ°å€ = 'https://niuma-server-production.up.railway.app';

        // å½“ç½‘é¡µåŠ è½½å¥½ï¼Œå°±å»åå°æ‹¿æ•°æ®
        window.onload = async function() {
            try {
                const å“åº” = await fetch(åå°åœ°å€ + '/api/posts');
                const ç»“æœ = await å“åº”.json();
                
                const å¸–å­å®¹å™¨ = document.getElementById('postList');
                å¸–å­å®¹å™¨.innerHTML = ''; // æ¸…ç©ºâ€œåŠ è½½ä¸­â€
                
                if (ç»“æœ.success) {
                    // æŠŠæ¯æ¡åŠ¨æ€åšæˆå¡ç‰‡ï¼Œæ’åˆ°ç½‘é¡µé‡Œ
                    ç»“æœ.data.forEach(åŠ¨æ€ => {
                        const å¡ç‰‡ = document.createElement('div');
                        å¡ç‰‡.className = 'card';
                        å¡ç‰‡.innerHTML = `
                            <div class="name">${åŠ¨æ€.name}</div>
                            <div class="text">${åŠ¨æ€.text}</div>
                            <div class="likes">ğŸ‘ ${åŠ¨æ€.likes} æ¬¡å…±é¸£</div>
                        `;
                        å¸–å­å®¹å™¨.appendChild(å¡ç‰‡);
                    });
                } else {
                    å¸–å­å®¹å™¨.innerHTML = '<div class="card">æ•°æ®åŠ è½½å‡ºé”™äº†ã€‚</div>';
                }
            } catch (é”™è¯¯) {
                document.getElementById('postList').innerHTML = `<div class="card">è¿æ¥åå°å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œï¼Œå¹¶ç¡®ä¿åå°åœ°å€å¡«å†™æ­£ç¡®ã€‚<br><br>ä½ å¡«å†™çš„åœ°å€æ˜¯ï¼š<strong>${åå°åœ°å€}</strong></div>`;
                console.error('é”™è¯¯è¯¦æƒ…ï¼š', é”™è¯¯);
            }
        };
    </script>
</body>
</html>